<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (1.8.0_252) on Mon Aug 03 19:07:37 CEST 2020 -->
<title>Storage</title>
<meta name="date" content="2020-08-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Storage";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":42,"i15":10,"i16":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Storage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/PersistentStorage.html" title="class in main.java.de.bsi.tsesimulator.tse.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?main/java/de/bsi/tsesimulator/tse/storage/Storage.html" target="_top">Frames</a></li>
<li><a href="Storage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">main.java.de.bsi.tsesimulator.tse.storage</div>
<h2 title="Class Storage" class="title">Class Storage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>main.java.de.bsi.tsesimulator.tse.storage.Storage</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Storage</span>
extends java.lang.Object</pre>
<div class="block">This class represents the normal Storage of the TSE. In this storage, the log files are kept until they are exported.
 The Storage class manages this export in addition to the actual storing on disc of each log. It also manages all the other export functions that require 
 fetching and filtering of log files, certificate files or similar.
 
 It does, however, <b>not</b> manage how persistent values are stored between shutdowns of the simulator.</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>1.5</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>dpottkaemper</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/PersistentStorage.html" title="class in main.java.de.bsi.tsesimulator.tse.storage"><code>PersistentStorage</code></a>, 
<a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/PersistedValues.html" title="class in main.java.de.bsi.tsesimulator.tse.storage"><code>PersistedValues</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#pathToStorageDir">pathToStorageDir</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#Storage--">Storage</a></span>()</code>
<div class="block">Creates a Storage object which serves as the TSE's storage during its runtime.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private java.io.File</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#createInfoCSV-java.lang.String-java.lang.String-java.lang.String-">createInfoCSV</a></span>(java.lang.String&nbsp;description,
             java.lang.String&nbsp;manufacturerInfo,
             java.lang.String&nbsp;version)</code>
<div class="block">Method for creating the info.csv file in the storageDir so it may be included in the TAR-archive that will be exported.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#deleteStoredData--">deleteStoredData</a></span>()</code>
<div class="block">Provides the means to delete stored messages from the storageDir.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#exportCertificateData-long-">exportCertificateData</a></span>(long&nbsp;unixTimeAtCallingOfStoreMethod)</code>
<div class="block">Exports the certificate files stored in the TSE.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#exportData-java.lang.String-java.lang.String-java.lang.String-long-java.io.File:A-">exportData</a></span>(java.lang.String&nbsp;seapiDescription,
          java.lang.String&nbsp;manufacturerInfo,
          java.lang.String&nbsp;versionInfo,
          long&nbsp;unixTimeAtCallingOfStoreMethod,
          java.io.File[]&nbsp;filesThatShallBeExported)</code>
<div class="block">This method is an updated version of its predecessors with the same name.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.io.File[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listCertificateFiles--">listCertificateFiles</a></span>()</code>
<div class="block">Used for fetching the certificate files used by the TSE-Simulator.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;java.io.File&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listFilesAuditLogsSystemLogsSignatureCounter-java.util.List-">listFilesAuditLogsSystemLogsSignatureCounter</a></span>(java.util.List&lt;java.lang.Long&gt;&nbsp;sigCntrsAlreadyPresent)</code>
<div class="block">This method is used by the <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a> for those exportData variants that filter by transaction number(s).</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.util.Collection&lt;java.io.File&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listFilesClientID-java.lang.String-java.util.Collection-">listFilesClientID</a></span>(java.lang.String&nbsp;clientID,
                 java.util.Collection&lt;java.io.File&gt;&nbsp;prefilteredFiles)</code>
<div class="block">Used for filtering only those files, that were created by a certain client.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;java.io.File&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listFilesClientIdAndTransactionNumber-java.util.Collection-java.util.Collection-">listFilesClientIdAndTransactionNumber</a></span>(java.util.Collection&lt;java.io.File&gt;&nbsp;preFilteredByClientId,
                                     java.util.Collection&lt;java.io.File&gt;&nbsp;preFilteredByTransactionNumbers)</code>
<div class="block">Used for filtering those Transaction Log files that belong to a transaction which has a transaction number from a certain interval and during whose lifetime
 at least one operation (start, update, or finish) was performed by a particular clientId.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.io.File[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listFilesClientIDOLD-java.lang.String-java.io.File:A-">listFilesClientIDOLD</a></span>(java.lang.String&nbsp;clientID,
                    java.io.File[]&nbsp;prefilteredFiles)</code>
<div class="block">Used for filtering only those files, that were created by a certain client.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.io.File[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listFilesSignatureCounter-long-long-">listFilesSignatureCounter</a></span>(long&nbsp;startSigCntr,
                         long&nbsp;endSigCntr)</code>
<div class="block">Searches the storage for log files whose signature counter lies between startSigCntr and endSigCntr (inclusive).</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.io.File[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listFilesStartDateEndDate-java.time.ZonedDateTime-java.time.ZonedDateTime-">listFilesStartDateEndDate</a></span>(java.time.ZonedDateTime&nbsp;startDate,
                         java.time.ZonedDateTime&nbsp;endDate)</code>
<div class="block">Method for filtering log files created between two points in time.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;java.io.File&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listFilesTransactionNumbers-long-long-">listFilesTransactionNumbers</a></span>(long&nbsp;startNumber,
                           long&nbsp;endNumber)</code>
<div class="block">This method is used by the <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a> to filter stored transaction log files according to (a) certain transaction number(s).</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>java.util.Collection&lt;java.io.File&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listLogFiles--">listLogFiles</a></span>()</code>
<div class="block">Uses <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listLogFilesOLD--">listLogFilesOLD()</a> to fetch an array of File objects containing all log messages.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.io.File[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listLogFilesOLD--">listLogFilesOLD</a></span>()</code>
<div class="block"><b>Old version of <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listLogFiles--">listLogFiles()</a>.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#storeAuditLog--">storeAuditLog</a></span>()</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">Please note that this function does not do anything at this moment. If, and only if, in the future one wants the simulator to produce AuditLogs, which it is incapable of producing 
 as of version 1.4, this would be the method to store those logs.</span></div>
</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#storeSystemLog-byte:A-long-long-java.lang.String-">storeSystemLog</a></span>(byte[]&nbsp;systemLogCompleteTLVByteArray,
              long&nbsp;logTime,
              long&nbsp;signatureCounter,
              java.lang.String&nbsp;operationType)</code>
<div class="block">Stores SystemLogMessages in the directory specified by the path in config.properties.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#storeTransactionLog-byte:A-long-long-long-java.lang.String-java.lang.String-">storeTransactionLog</a></span>(byte[]&nbsp;transactionLogCompleteTLVByteArray,
                   long&nbsp;logtime,
                   long&nbsp;signatureCounter,
                   long&nbsp;transactionNumber,
                   java.lang.String&nbsp;operationType,
                   java.lang.String&nbsp;clientId)</code>
<div class="block">Stores TransactionLogMessages in the directory specified by the path in config.properties.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="pathToStorageDir">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>pathToStorageDir</h4>
<pre>private&nbsp;java.lang.String pathToStorageDir</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Storage--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Storage</h4>
<pre>public&nbsp;Storage()
        throws <a href="../../../../../../../main/java/de/bsi/tsesimulator/exceptions/LoadingFailedException.html" title="class in main.java.de.bsi.tsesimulator.exceptions">LoadingFailedException</a></pre>
<div class="block">Creates a Storage object which serves as the TSE's storage during its runtime. Each Storage is created with a path that points to the actual directory
 on disc which stores the files. That path is built by <a href="../../../../../../../main/java/de/bsi/tsesimulator/preferences/PropertyValues.html" title="class in main.java.de.bsi.tsesimulator.preferences">PropertyValues</a> and fetched via <a href="../../../../../../../main/java/de/bsi/tsesimulator/preferences/PropertyValues.html#getPathToNormalStorage--">PropertyValues.getPathToNormalStorage()</a>.
 It is therefore necessary, that <a href="../../../../../../../main/java/de/bsi/tsesimulator/preferences/PropertyValues.html#setPathToResourceDirectory-java.lang.String-">PropertyValues.setPathToResourceDirectory(String)</a> has been called before constructing a Storage.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../main/java/de/bsi/tsesimulator/exceptions/LoadingFailedException.html" title="class in main.java.de.bsi.tsesimulator.exceptions">LoadingFailedException</a></code> - if constructing the path in <a href="../../../../../../../main/java/de/bsi/tsesimulator/preferences/PropertyValues.html" title="class in main.java.de.bsi.tsesimulator.preferences">PropertyValues</a> fails.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="storeTransactionLog-byte:A-long-long-long-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeTransactionLog</h4>
<pre>public&nbsp;void&nbsp;storeTransactionLog(byte[]&nbsp;transactionLogCompleteTLVByteArray,
                                long&nbsp;logtime,
                                long&nbsp;signatureCounter,
                                long&nbsp;transactionNumber,
                                java.lang.String&nbsp;operationType,
                                java.lang.String&nbsp;clientId)
                         throws <a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorStorageFailure.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorStorageFailure</a></pre>
<div class="block">Stores TransactionLogMessages in the directory specified by the path in config.properties. The messages are stored in their byte array 
 TLV format and are named according to TR-03151. During the process of storing the created log message file, the attribute <i>last modified</i> 
 is set to the value of log time. This is necessary for the correct performance of the function <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html#exportData-java.time.ZonedDateTime-java.time.ZonedDateTime-int-main.java.de.bsi.seapi.holdertypes.ByteArrayHolder-">TSEController.exportData(ZonedDateTime, ZonedDateTime, int, main.java.de.bsi.seapi.holdertypes.ByteArrayHolder)</a>.
 The name structure is: <br><br>
 
 DATE-FORMAT_DATE_sig-SIGNATURE-COUNTER_LOG_No-TRANSACTION_TYPE_Client-CLIENT-ID_Fc-FILE-COUNTER.log <br>
 The values in parenthesis are parameters. The values with || between them are a "must be exactly one of the mentioned values". <br>
 (Unixt||Utc||Gent)_(logtime)_Sig-(signatureCounter)_Log-Tra_No-(transactionNumber)_(Start||Update||Finish)_Client-(clientId).log <br> <br>
 
 If a file with exactly the same name as the LogMessage that shall be saved exists, the new log message is saved under the same name but with 
 the addition of "_Fc-y" in front of the .log extension. The y is an integer and it counts how many files with the same name already exist. <br>
 This means, that for example a duplicate of the file <b>Unixt_1554988806_Sig-1_Log-Tra_No-1_Start_Client-CRE-AM-X2019J00123456.log</b> would be 
 saved as <b>Unixt_1554988806_Sig-1_Log-Tra_No-1_Start_Client-CRE-AM-X2019J00123456_Fc-1.log</b>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transactionLogCompleteTLVByteArray</code> - - the whole TransactionLogMessage in its TLV byte array form with the SEQUENCE wrapper.</dd>
<dd><code>logtime</code> - - the logTime value of the log message in UnixTime format. Currently, ONLY UnixTime is supported. Is used to set the attribute <i>last modified</i> as well.</dd>
<dd><code>signatureCounter</code> - - the signatureCounter value of the TransactionLogMessage.</dd>
<dd><code>transactionNumber</code> - - the transactionNumber value of the log message.</dd>
<dd><code>operationType</code> - - the operationType of the log message. If it is not "StartTransaction", "UpdateTransaction" or "FinishTransaction" an Error 
 is thrown because it is an unknown operation type.</dd>
<dd><code>clientId</code> - - the clientID of the TranasctionLogMessage.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorStorageFailure.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorStorageFailure</a></code> - <blockquote>- if the TransactionLogMessage had an unknown operationType associated with it and it could therefore not be
 stored under a legal file name. <br>
 - if writing to the file that shall store the log message fails because of IOExceptions or other Exceptions.</dd>
</dl>
</li>
</ul>
<a name="storeSystemLog-byte:A-long-long-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeSystemLog</h4>
<pre>public&nbsp;void&nbsp;storeSystemLog(byte[]&nbsp;systemLogCompleteTLVByteArray,
                           long&nbsp;logTime,
                           long&nbsp;signatureCounter,
                           java.lang.String&nbsp;operationType)
                    throws <a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorStorageFailure.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorStorageFailure</a></pre>
<div class="block">Stores SystemLogMessages in the directory specified by the path in config.properties. The messages are stored in their byte array 
 TLV format and are named according to TR-03151.  During the process of storing the created log message file, the attribute <i>last modified</i> 
 is set to the value of log time. This is necessary for the correct performance of the function <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html#exportData-java.time.ZonedDateTime-java.time.ZonedDateTime-int-main.java.de.bsi.seapi.holdertypes.ByteArrayHolder-">TSEController.exportData(ZonedDateTime, ZonedDateTime, int, main.java.de.bsi.seapi.holdertypes.ByteArrayHolder)</a>.
 The name structure is: <br><br>
 
 DATE-FORMAT_DATE_sig-SIGNATURE-COUNTER_LOG_TYPE_Fc-FILE-COUNTER.log <br>
 The values in paranthesis are parameters. The values with || between them are a "must be exactly one of the specified values". <br>
 (Unixt||Utc||Gent)_(logtime)_Sig-(signatureCounter)_Log-Sys_(Initialize||UpdateTime||DisableSecureElement||AuthenticateUser||LogOut||UnblockUser).log<br><br>

 If a file with exactly the same name as the LogMessage that shall be saved exists, the new logmessage is saved under the same name but with 
 the addition of "_Fc-y" in front of the .log extension. The y is an integer and it counts how many files with the same name already exist. <br>
 This means, that for example a duplicate of the file <b>Unixt_1554990849_Sig-2_Log-Sys_Initialize.log</b> would be saved as 
 <b>Unixt_1554990849_Sig-2_Log-Sys_Initialize_Fc-1.log</b>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>systemLogCompleteTLVByteArray</code> - - the whole SystemLogMessage in its TLV byte array form with the SEQUENCE wrapper.</dd>
<dd><code>logTime</code> - - the logTime value of the logmessage in UnixTime format. Currently, ONLY UnixTime is supported. Is used to set the attribute <i>last modified</i> as well.</dd>
<dd><code>signatureCounter</code> - - the signatureCounter value of the SystemLogMessage.</dd>
<dd><code>operationType</code> - - the operationType of the logmessage. Should be exactly in the format that TR-03151 wants it to be.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorStorageFailure.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorStorageFailure</a></code> - if writing to the file that shall store the logmessage fails because of IOExceptions or other Exceptions.</dd>
</dl>
</li>
</ul>
<a name="storeAuditLog--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeAuditLog</h4>
<pre>public&nbsp;void&nbsp;storeAuditLog()</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">Please note that this function does not do anything at this moment. If, and only if, in the future one wants the simulator to produce AuditLogs, which it is incapable of producing 
 as of version 1.4, this would be the method to store those logs.</span></div>
</li>
</ul>
<a name="exportData-java.lang.String-java.lang.String-java.lang.String-long-java.io.File:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exportData</h4>
<pre>public&nbsp;byte[]&nbsp;exportData(java.lang.String&nbsp;seapiDescription,
                         java.lang.String&nbsp;manufacturerInfo,
                         java.lang.String&nbsp;versionInfo,
                         long&nbsp;unixTimeAtCallingOfStoreMethod,
                         java.io.File[]&nbsp;filesThatShallBeExported)</pre>
<div class="block">This method is an updated version of its predecessors with the same name. It is used to export any combination of log messages from the TSE storage.<br>
 Depending on the type of exportData function call in the TSEController, the controller may provide an array of all log files present (via <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listLogFiles--">listLogFiles()</a> or 
 a more restricted list.
 
 For example, in the case of a start/and or an endDate provided, the caller of this method has to ensure that the files given to this method are only the ones
 that shall be exported. Preferably, one of the <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listFilesStartDateEndDate-java.time.ZonedDateTime-java.time.ZonedDateTime-">listFilesStartDateEndDate(ZonedDateTime, ZonedDateTime)</a> or similar has
 been used in advance.
 <br>Be aware that there can only be one TAR-Archive that is exported at a time and that the method can not clearly distinguish the an old
 exportedData.txt from a new one. This should not be an issue, if the byte array returned is converted back into a TAR archive and stored somewhere different 
 from the storage defined by the config.properties file.<br></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>seapiDescription</code> - the description of the SE API. Has to be provided by the <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a> and is used to create the info.csv file.</dd>
<dd><code>manufacturerInfo</code> - information about the manufacturer. Has to be provided by the <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a> and is used to create the info.csv file.</dd>
<dd><code>versionInfo</code> - information about the current version of the TSE. Has to be provided by the <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a> and is used to create the info.csv file.</dd>
<dd><code>unixTimeAtCallingOfStoreMethod</code> - used to set the <i>mtime</i> in each file header of the TAR archive. Because of limited access to the CryptoCore's clock,
 this has to be provided by the TSEController at the time of the exportData call</dd>
<dd><code>filesThatShallBeExported</code> - an array of the files that shall be exported</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the byte array representation of the TAR archive containing an info.csv file, the certificate of the public key used for signature
 creation and the log files that are exported.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a name="exportCertificateData-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exportCertificateData</h4>
<pre>public&nbsp;byte[]&nbsp;exportCertificateData(long&nbsp;unixTimeAtCallingOfStoreMethod)
                             throws <a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorExportCertFailed.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorExportCertFailed</a></pre>
<div class="block">Exports the certificate files stored in the TSE. This method only works as intended, if the certificates are stored and named as is described in the TR.
 It creates a TAR archive using <a href="../../../../../../../main/java/de/bsi/tsesimulator/utils/TARUtils.html#createTARArchiveForExportCertificates-java.io.File:A-java.lang.String:A-long-">TARUtils.createTARArchiveForExportCertificates(File[], String[], long)</a> and returns that as a byte array.
 A time has to be provided to this method to set the <i>mtime</i> attribute of the TAR archive in accordance with TR-03151.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>unixTimeAtCallingOfStoreMethod</code> - the time this method was called.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a TAR archive containing all certificates stored in the TSE.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorExportCertFailed.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorExportCertFailed</a></code> - if no certificates are found in the designated storage directory (the keyDir path of config.properties) or if <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listCertificateFiles--">listCertificateFiles()</a> throws it</dd>
</dl>
</li>
</ul>
<a name="deleteStoredData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteStoredData</h4>
<pre>public&nbsp;void&nbsp;deleteStoredData()
                      throws <a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorUnexportedStoredData.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorUnexportedStoredData</a>,
                             <a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorDeleteStoredDataFailed.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorDeleteStoredDataFailed</a></pre>
<div class="block">Provides the means to delete stored messages from the storageDir.
 It first checks the storageDIr for the presence of a text file named "exportedData.txt".
 This file stores the names of all the log files each time they are exported. If such a file is not present, it can be concluded, that
 there was no attempt in the past to export data.
 <br>If exportedData.txt exists, the content is then read and compared to the log messages present in the storage directory.
 It is then checked, that all log files present in the directory can be found in exportedData.txt and have therefore been exported.
 
 The method is synchronized so no two processes try to delete data at the same time.<br>
 
 Note: if an error arises during the deletion process, there is no measure in place to ensure the storage is left in a consistent state.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorUnexportedStoredData.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorUnexportedStoredData</a></code> - if data is present in the storageDir but not on the list of exported files</dd>
<dd><code><a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorDeleteStoredDataFailed.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorDeleteStoredDataFailed</a></code> - if something happens during the deletion process that messes the deletion process up, this is thrown</dd>
</dl>
</li>
</ul>
<a name="listFilesStartDateEndDate-java.time.ZonedDateTime-java.time.ZonedDateTime-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listFilesStartDateEndDate</h4>
<pre>public&nbsp;java.io.File[]&nbsp;listFilesStartDateEndDate(java.time.ZonedDateTime&nbsp;startDate,
                                                java.time.ZonedDateTime&nbsp;endDate)</pre>
<div class="block">Method for filtering log files created between two points in time. The length of the array returned can also be used to be compared
 to maxNumberRecords in <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">#exportData(ZonedDateTime, ZonedDateTime, int, main.java.de.bsi.seapi.holdertypes.ByteArrayHolder)</a>
 and <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html#exportData-java.time.ZonedDateTime-java.time.ZonedDateTime-java.lang.String-int-main.java.de.bsi.seapi.holdertypes.ByteArrayHolder-">TSEController.exportData(ZonedDateTime, ZonedDateTime, String, int, main.java.de.bsi.seapi.holdertypes.ByteArrayHolder)</a>.
 The caller has to make sure, that at least one of the two parameters is present and that both are valid. That means, both have to be in the
 range of <a href="../../../../../../../main/java/de/bsi/tsesimulator/constants/Constants.html#EARLIEST_LEGAL_TIME">Constants.EARLIEST_LEGAL_TIME</a> - <a href="../../../../../../../main/java/de/bsi/tsesimulator/constants/Constants.html#LATEST_LEGAL_TIME">Constants.LATEST_LEGAL_TIME</a>.<br>
 
 The caller has to be aware of the fact, that in case of a quick running simulator, calling this method <b>directly after</b> creating a <a href="../../../../../../../main/java/de/bsi/tsesimulator/msg/LogMessage.html" title="class in main.java.de.bsi.tsesimulator.msg">LogMessage</a> may cause issues.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startDate</code> - the date after which logs shall be filtered. Is optional, if endDate has been provided.</dd>
<dd><code>endDate</code> - the date before which logs shall be filtered. Is optional, if startDate is present.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list containing all the files that match the desired time frame and end with .log</dd>
</dl>
</li>
</ul>
<a name="listFilesSignatureCounter-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listFilesSignatureCounter</h4>
<pre>public&nbsp;java.io.File[]&nbsp;listFilesSignatureCounter(long&nbsp;startSigCntr,
                                                long&nbsp;endSigCntr)
                                         throws <a href="../../../../../../../main/java/de/bsi/tsesimulator/exceptions/SignatureCounterException.html" title="class in main.java.de.bsi.tsesimulator.exceptions">SignatureCounterException</a></pre>
<div class="block">Searches the storage for log files whose signature counter lies between startSigCntr and endSigCntr (inclusive).
 If no LogFiles with signature counters in the specified interval are found, the return value is null.
 
 Reminder: File names are constructed as follows:<br>
        -TransactionLogs: (Unixt||Utc||Gent)_(logtime)_Sig-(signatureCounter)_Log-Tra_No-(transactionNumber)_(Start||Update||Finish)_Client-(clientId).log <br><br>
  -SystemLogs:    (Unixt||Utc||Gent)_(logtime)_Sig-(signatureCounter)_Log-Sys_(Initialize||UpdateTime||DisableSecureElement||AuthenticateUser||LogOut||UnblockUser).log<br><br>
  -AuditLogs:             (Unixt||Utc||Gent)_(logtime)_Sig-(signatureCounter)_Log-Aud.log<br><br>
  
  Optionally, there could be an "_Fc-FILECOUNTER" before the ".log", this should only happen in the case of SystemLogMessageg or AuditLogMessages.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startSigCntr</code> - - lower bound of the interval, > 0.</dd>
<dd><code>endSigCntr</code> - - upper bound of the interval, > 0.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an array containing all the files whose signature counter lies in the provided interval. The array is empty, if no 
 log messages with the specified signature counters could be found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../main/java/de/bsi/tsesimulator/exceptions/SignatureCounterException.html" title="class in main.java.de.bsi.tsesimulator.exceptions">SignatureCounterException</a></code> - - one or both signature counters provided are not truly positive.</dd>
</dl>
</li>
</ul>
<a name="listFilesTransactionNumbers-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listFilesTransactionNumbers</h4>
<pre>public&nbsp;java.util.Collection&lt;java.io.File&gt;&nbsp;listFilesTransactionNumbers(long&nbsp;startNumber,
                                                                      long&nbsp;endNumber)
                                                               throws <a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorParameterMismatch.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorParameterMismatch</a></pre>
<div class="block">This method is used by the <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a> to filter stored transaction log files according to (a) certain transaction number(s).
 The <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html" title="class in main.java.de.bsi.tsesimulator.tse.storage">Storage</a> is searched for transaction log files with file names, which match the given transaction number(s).
 The method employs checks to determine if the values of startNumber and endNumber are in the expected range. If they are, the following actions depend on whether the filtering 
 shall occur taking only one transactionNumber or two into account. 
 
 The case using only one transaction number tends to be much quicker, since the filtering can be done without the need for a loop.
 The method uses regular expressions to search for TransactionLogMessages with the specified transaction number. It does expect the file names to be formatted according to 
 BSI TR-03151 chapter 5.1.2. 
 Reminder: the TR expects TransactionLogs to have file names constructed like this:<br>
 (Unixt||Utc||Gent)_(logtime)_Sig-(signatureCounter)_Log-Tra_No-(transactionNumber)_(Start||Update||Finish)_Client-(clientId).log <br><br></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startNumber</code> - - the lower bound of the interval. Has to be truly greater than zero.</dd>
<dd><code>endNumber</code> - - the upper bound of the interval. Has to be truly greater than zero.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a collection of files containing all Transaction-Logs with the specified transaction number(s). Null, if none were found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../main/java/de/bsi/seapi/exceptions/ErrorParameterMismatch.html" title="class in main.java.de.bsi.seapi.exceptions">ErrorParameterMismatch</a></code> - if one or both transaction numbers are <= 0 or if startNumber < endNumber.</dd>
</dl>
</li>
</ul>
<a name="listFilesAuditLogsSystemLogsSignatureCounter-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listFilesAuditLogsSystemLogsSignatureCounter</h4>
<pre>public&nbsp;java.util.Collection&lt;java.io.File&gt;&nbsp;listFilesAuditLogsSystemLogsSignatureCounter(java.util.List&lt;java.lang.Long&gt;&nbsp;sigCntrsAlreadyPresent)
                                                                                throws <a href="../../../../../../../main/java/de/bsi/tsesimulator/exceptions/SignatureCounterException.html" title="class in main.java.de.bsi.tsesimulator.exceptions">SignatureCounterException</a></pre>
<div class="block">This method is used by the <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a> for those exportData variants that filter by transaction number(s).
 Since TR-03151 requires an extended search for SystemLogs and AuditLogs in the interval the transaction(s) in question was/were performed only, if there are any 
 TransactionLogs with that transaction number(s) stored, the filtering of those can not be performed by <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listFilesTransactionNumbers-long-long-">listFilesTransactionNumbers(long, long)</a>.
 Another reason is the fact that a call of <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html#updateTime-java.time.ZonedDateTime-">TSEController.updateTime(ZonedDateTime)</a> could mess up the sequence in which the log files are stored on 
 the file system. <br>
 This method here takes an interval of signature counters, often those corresponding to a/multiple pre-filtered transaction log message(s), and searches 
 in that interval for SystemLogs and AuditLogs.
 The search for those log messages may consume a lot of time, since the search is performed for each signature counter not already contained in the interval.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sigCntrsAlreadyPresent</code> - a list of signature counters that form an interval</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a collection of files, more specifically, a linked list, of the System and AuditLogs missing from the signature counter interval passed in. Null, if no such log files were found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../main/java/de/bsi/tsesimulator/exceptions/SignatureCounterException.html" title="class in main.java.de.bsi.tsesimulator.exceptions">SignatureCounterException</a></code> - if the interval is too short or not present at all (null)</dd>
</dl>
</li>
</ul>
<a name="listLogFilesOLD--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listLogFilesOLD</h4>
<pre>public&nbsp;java.io.File[]&nbsp;listLogFilesOLD()</pre>
<div class="block"><b>Old version of <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listLogFiles--">listLogFiles()</a>.</b><br>
 Method used by <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html#exportData-int-main.java.de.bsi.seapi.holdertypes.ByteArrayHolder-">TSEController.exportData(int, main.java.de.bsi.seapi.holdertypes.ByteArrayHolder)</a> to get all logs that could possibly be exported. 
 Replaces the former used method <code>public int numberOfAvailableLogs()</code>. <br>
 <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listLogFiles--">listLogFiles()</a> uses this method as well internally.
 
 It searches the directory specified in storageDir for files ending with ".log".<br>
 If something goes wrong, i.e. the path to the storage directory can not be resolved properly or an I/O error occurs,
 the list of files found will be null and the return value of this function will be null as well.
 Otherwise, all files ending with ".log" will be returned. 
 
 Please be aware, that unlike with the predecessor of this method, the caller has to make sure, that it does not continue working with a null value.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>all log message files in the storage directory, if there are any. Null otherwise.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a name="listLogFiles--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listLogFiles</h4>
<pre>public&nbsp;java.util.Collection&lt;java.io.File&gt;&nbsp;listLogFiles()</pre>
<div class="block">Uses <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/Storage.html#listLogFilesOLD--">listLogFilesOLD()</a> to fetch an array of File objects containing all log messages. Then converts that array into an ArrayList
 through the usage of <code> List<File> list = new ArrayList<File>(Arrays.asList(arrayOfLogfiles))</code><br>
 This results in the old array being used as a backing for the new list. Any changes to the list will be written through to the underlying array.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>all log message files in the storage directory, if there are any. Null otherwise.</dd>
</dl>
</li>
</ul>
<a name="listFilesClientIDOLD-java.lang.String-java.io.File:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listFilesClientIDOLD</h4>
<pre>public&nbsp;java.io.File[]&nbsp;listFilesClientIDOLD(java.lang.String&nbsp;clientID,
                                           java.io.File[]&nbsp;prefilteredFiles)</pre>
<div class="block">Used for filtering only those files, that were created by a certain client.
 Caller has to make sure the File[] provided is already filtered and that the clientID is not null.
 Mainly used by <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a> for the exportData methods.
 If the pre-filtered files contain SystemLogs and/or AuditLogs, those are returned as well.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>clientID</code> - the clientId whose log files shall be filtered</dd>
<dd><code>prefilteredFiles</code> - an array of files that already match a certain condition (e.g. were all created in a certain period of time).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the array of files filtered again for that specific clientID</dd>
</dl>
</li>
</ul>
<a name="listFilesClientID-java.lang.String-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listFilesClientID</h4>
<pre>public&nbsp;java.util.Collection&lt;java.io.File&gt;&nbsp;listFilesClientID(java.lang.String&nbsp;clientID,
                                                            java.util.Collection&lt;java.io.File&gt;&nbsp;prefilteredFiles)</pre>
<div class="block">Used for filtering only those files, that were created by a certain client.
 Caller has to make sure the Collection<File> provided is already filtered and that the clientID is not null.
 Mainly used by <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a> for the exportData methods.
 If the pre-filtered files contain SystemLogs and/or AuditLogs, those are returned as well.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>clientID</code> - the clientId whose log files shall be filtered</dd>
<dd><code>prefilteredFiles</code> - a collection of files that already match a certain condition (e.g. were all created in a certain period of time).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the array of files filtered again for that specific clientID</dd>
</dl>
</li>
</ul>
<a name="listFilesClientIdAndTransactionNumber-java.util.Collection-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listFilesClientIdAndTransactionNumber</h4>
<pre>public&nbsp;java.util.Collection&lt;java.io.File&gt;&nbsp;listFilesClientIdAndTransactionNumber(java.util.Collection&lt;java.io.File&gt;&nbsp;preFilteredByClientId,
                                                                                java.util.Collection&lt;java.io.File&gt;&nbsp;preFilteredByTransactionNumbers)</pre>
<div class="block">Used for filtering those Transaction Log files that belong to a transaction which has a transaction number from a certain interval and during whose lifetime
 at least one operation (start, update, or finish) was performed by a particular clientId.<br>
 It takes a Collection of transaction log files that were filtered by their clientId and a Collection of transaction log files that were filtered by their transaction numbers.
 It then identifies those transactions whose transaction numbers appear in both lists.<br>
 <br>
 Is used in <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html#exportData-long-long-java.lang.String-int-main.java.de.bsi.seapi.holdertypes.ByteArrayHolder-">TSEController.exportData(long, long, String, int, main.java.de.bsi.seapi.holdertypes.ByteArrayHolder)</a> where filtering only by transaction number interval 
 or clientId alone does not suffice.<br>
 This method does not expect System- or AuditLogs as input and is strictly focused on returning TransactionLogs.
 A method that filters for the other log types may be needed after using this method. <br>
 Please note: this method of filtering is <b>not optimized</b> and may take some time.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>preFilteredByClientId</code> - collection of files that were all created by the same clientId. Preferably only transaction logs.</dd>
<dd><code>preFilteredByTransactionNumbers</code> - collection of files that bear a certain transaction number or whose transaction number lies in a certain interval.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null, if the clientId was not involved in any transactions with the provided transaction numbers. The collection containing those logs were clientId was at least 
 once involved otherwise.</dd>
</dl>
</li>
</ul>
<a name="listCertificateFiles--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listCertificateFiles</h4>
<pre>public&nbsp;java.io.File[]&nbsp;listCertificateFiles()
                                    throws java.io.IOException</pre>
<div class="block">Used for fetching the certificate files used by the TSE-Simulator. Does not work, if the directory specified by config.properties "keyDir" 
 does not contain all the certificate files. Does not work either, if the certificate files are not named according to BSI TR-03151. This includes 
 not having the 256 Bit public key hash in their file name.<br> This is due to the usage of regular expressions for filtering the files.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an array of files that are contained in the keyDir and are certificate files.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if <a href="../../../../../../../main/java/de/bsi/tsesimulator/preferences/PropertyValues.html#getInstance--">PropertyValues.getInstance()</a> throws it</dd>
</dl>
</li>
</ul>
<a name="createInfoCSV-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>createInfoCSV</h4>
<pre>private&nbsp;java.io.File&nbsp;createInfoCSV(java.lang.String&nbsp;description,
                                   java.lang.String&nbsp;manufacturerInfo,
                                   java.lang.String&nbsp;version)</pre>
<div class="block">Method for creating the info.csv file in the storageDir so it may be included in the TAR-archive that will be exported.
 All parameters have to be provided by the <a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/TSEController.html" title="class in main.java.de.bsi.tsesimulator.tse">TSEController</a>.
 For more information on how the info.csv file shall be constructed, see BSI TR-03153 Version 1.0.1 Tabelle 4.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>description</code> - the description of the SE API.</dd>
<dd><code>manufacturerInfo</code> - information about the manufacturer.</dd>
<dd><code>version</code> - information about the version of the SE API. This shall not be confused with the version present in each log message.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a File named info.csv. The content is set according to BSI TR-03151 chapter 5.1.1.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Storage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../main/java/de/bsi/tsesimulator/tse/storage/PersistentStorage.html" title="class in main.java.de.bsi.tsesimulator.tse.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?main/java/de/bsi/tsesimulator/tse/storage/Storage.html" target="_top">Frames</a></li>
<li><a href="Storage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
